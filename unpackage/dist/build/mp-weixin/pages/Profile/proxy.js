(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Profile/proxy"],{"0207":function(t,n,e){"use strict";(function(t){e("fcfa");o(e("66fd"));var n=o(e("c77c"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"2dbc":function(t,n,e){},c77c:function(t,n,e){"use strict";e.r(n);var o=e("ebc3"),a=e("ec2f");for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);e("f76a");var s,r=e("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);n["default"]=u.exports},cc8f:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=s(e("a34a")),a=e("e462"),i=s(e("3e44"));function s(t){return t&&t.__esModule?t:{default:t}}function r(t,n,e,o,a,i,s){try{var r=t[i](s),u=r.value}catch(c){return void e(c)}r.done?n(u):Promise.resolve(u).then(o,a)}function u(t){return function(){var n=this,e=arguments;return new Promise((function(o,a){var i=t.apply(n,e);function s(t){r(i,o,a,s,u,"next",t)}function u(t){r(i,o,a,s,u,"throw",t)}s(void 0)}))}}var c={data:function(){return{params:{name:"",numbers_id:"",phone:"",content:"",address:"",latitude:"",longitude:"",zheng_photo:"",fan_photo:"",photo:"",m_id:"",state:0},isFail:!0,step:1,positiveImg:"",obverseImg:"",otherImg:"",flag:!1}},onLoad:function(n){t.showLoading({title:"加载中..."}),this.params.m_id=n.m_id,this.getProxyDetail(n.m_id)},methods:{getProxyDetail:function(n){var e=this;(0,a.proxyDetail)(n).then((function(n){0!==n.length&&""!==n&&0!==Object.keys(n).length?(e.positiveImg=n.zheng_photo[0].abs_url,e.obverseImg=n.fan_photo[0].abs_url,e.otherImg=n.photo[0].abs_url,e.params=n,e.params.zheng_photo=n.zheng_photo[0].id,e.params.fan_photo=n.fan_photo[0].id,e.params.photo=n.photo[0].id,e.flag=!0,t.hideLoading()):t.hideLoading()})).catch((function(n){t.showToast({title:n,icon:"none"})}))},areaChange:function(n){var e=this;t.chooseLocation({success:function(t){e.params.address=t.address,e.params.latitude=t.latitude,e.params.longitude=t.longitude}})},uploadImage:function(n){var e=this;return u(o.default.mark((function a(){var s,r,u;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,new i.default({count:1,url:"Personal/upload"}).uploadPic();case 3:s=o.sent,r=s[0].data.list[0].abs_url,u=s[0].data.list[0].id,o.t0=n,o.next=0===o.t0?9:1===o.t0?12:2===o.t0?15:18;break;case 9:return e.params.zheng_photo=u,e.positiveImg=r,o.abrupt("break",18);case 12:return e.params.fan_photo=u,e.obverseImg=r,o.abrupt("break",18);case 15:return e.params.photo=u,e.otherImg=r,o.abrupt("break",18);case 18:o.next=23;break;case 20:o.prev=20,o.t1=o["catch"](0),t.showToast({title:o.t1,icon:"none"});case 23:case"end":return o.stop()}}),a,null,[[0,20]])})))()},taskParams:function(){return this.flag?0===this.params.name.trim().length?(t.showToast({title:"请输入真实姓名",icon:"none"}),!1):0===this.params.numbers_id.trim().length?(t.showToast({title:"请输入身份证号码",icon:"none"}),!1):0===this.params.phone.trim().length?(t.showToast({title:"请输入手机号码",icon:"none"}),!1):""===this.params.address?(t.showToast({title:"请选择所在区域",icon:"none"}),!1):""===this.params.zheng_photo?(t.showToast({title:"请上传身份证正面照",icon:"none"}),!1):""===this.params.fan_photo?(t.showToast({title:"请上传身份证反面照",icon:"none"}),!1):""===this.params.photo?(t.showToast({title:"请上传其他资质",icon:"none"}),!1):void(0===this.params.state?this.proxySubmit():this.againSubmit()):(t.showToast({title:"请勾选代理协议",icon:"none"}),!1)},proxySubmit:function(){t.showLoading({title:"正在提交...",mask:!0}),(0,a.proxyApply)(this.params).then((function(n){t.showToast({title:"提交成功,请等待审核...",icon:"success",mask:!0,success:function(){setTimeout((function(){t.navigateBack({delta:1})}),1500)}})})).catch((function(n){t.showToast({title:n,icon:"none"})}))},againSubmit:function(){t.showLoading({title:"正在提交...",mask:!0}),(0,a.proxyAgain)(this.params).then((function(n){t.showToast({title:"提交成功,请等待审核...",icon:"success",mask:!0,success:function(){setTimeout((function(){t.navigateBack({delta:1})}),1500)}})})).catch((function(n){t.showToast({title:n,icon:"none"})}))},routerText:function(n){t.navigateTo({url:"/pages/Home/textShow?type="+n})}}};n.default=c}).call(this,e("543d")["default"])},ebc3:function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}));var o={uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,"7518"))},uImage:function(){return e.e("uview-ui/components/u-image/u-image").then(e.bind(null,"fe06"))}},a=function(){var t=this,n=t.$createElement;t._self._c;t._isMounted||(t.e0=function(n){t.isFail=!1},t.e1=function(n){t.step=1},t.e2=function(n){t.flag=!t.flag},t.e3=function(n){t.step=2})},i=[]},ec2f:function(t,n,e){"use strict";e.r(n);var o=e("cc8f"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=a.a},f76a:function(t,n,e){"use strict";var o=e("2dbc"),a=e.n(o);a.a}},[["0207","common/runtime","common/vendor"]]]);